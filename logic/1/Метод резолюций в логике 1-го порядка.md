# Метод резолюций в логике 1-го порядка

[TOC]

## Подстановки и унификации

Рассмотрим метод резолюций в логике первого порядка. Относительно переменных в дизъюнктах будем предполагать, что они связаны кванторами общности, но сами кванторы писать не будем. Отсюда следует, что две одинаковые переменные в разных дизъюнктах можно считать различными.

Заметим, прежде всего, что в логике первого порядка правило резолюций в прежнем виде уже не годится. Действительно, множество дизъюнктов $S = {P(x), \neg P(a)}$ невыполнимо (так как предполагается, что переменная $x$ связана квантором общности). В то же время, если использовать правило резолюций для логики высказываний, то из $S$ пустого дизъюнкта не получить. Содержательно понятно, что именно в этом случае надо сделать. Поскольку дизъюнкт $P(x)$ можно прочитать “для любого $x$ истинно $P(x)$”, ясно, что $P(x)$ истинно будет и для $x = a$. Сделав подстановку $х = a$, получим множество дизъюнктов $S'= {P(a), \neg P(a)}$. Множества $S$ и $S'$ одновременно выполнимы или невыполнимы. Но из $S'$ пустой дизъюнкт с помощью прежнего правила резолюций выводится тривиальным образом. Этот пример подсказывает, что в логике первого порядка правило резолюций надо дополнить возможностью делать подстановку.

**Договоренность**:

​	В любой формальной теореме для свободных переменных __подразумевается квантор общности($\forall$)__.

## Определение(Подстановка в дизъюнктор):

​	Пусть есть формула $F{x_1; x_2; ...; x_n}$. Соответствие (или таблица соответствия) $\sigma: (x_1 \rightarrow t_1; x_2 \rightarrow t_2; ...; x_n \rightarrow t_n)$ называется **подстановкой в некоторый дизъюнктор термов $t_i$ вместо символов $x_i$**.

__Обозначение:__ Результаты подстановок будем обозначать $\sigma(F_i)$. 

## Определение(Унификация):

​	Подстановка $\sigma$ называется **унификацией** для данной системы , если результаты применения этой подстановки ко всем дизъюнкторам совпадают между собой, то есть выполнено равенство $\sigma(F_1)=\sigma(F_2)=...=\sigma(F_n)$. 

>  **Пример 1.** Для системы ${f^0x_1f^1(x_2);x_3x_4x_5}$ подстановка $(x_3 \rightarrow f^0; x_4 \rightarrow x_2; x_5 \rightarrow f^1(x_2))$ является унификатором.
>
> **Пример 2**. Система ${x_1f^1(x_1);x_2x_2}$ не унифицируема.

## Определение(Универсальный унификатор системы дизъюнкторов):

​	Унификатор $\tau$ называется **универсальным в данной системе дизъюнкторов**, если для любой подстановки $\sigma$ верно $\tau(F) = (\tau \circ \sigma)(F) = \tau(\sigma(F))$.

## Теорема(о существовании универсального унификатора для системы дизъюнкторов):

​	Если система дизъюнкторов унифицируема, то для нее существует универсальный унификатор.

### Доказательство:

$\forall a \forall b (a \in R \land a \geq 0 \land b \in R \land B \geq 0 \rightarrow \frac{a+b}{2} \geq \sqrt{ab})$

| $\forall a \forall b (a \in R \land a \geq 0 \land b \in R \land B \geq 0 \rightarrow \frac{a+b}{2} \geq \sqrt{ab})$ | Что и как делаем                                             |
| ------------------------------------------------------------ | ------------------------------------------------------------ |
| $a \in R, a \geq 0, b \in R, b \geq 0$                       | Теорема дедукции                                             |
| $\exists c \in R: a = c^2 \land c \geq 0\ \exists d \in R: b = d^2 \land d \geq 0$ | Теорема о полноте. $\forall x \geq 0 \exists y \geq 0 y^2 = x$ подстановка[] |
| $c - d \in R$                                                | Свойство $R$ как кольца. $\forall x, y \in R \rightarrow x -y \in R$ - подстановка |
| $(c - d) ^2 \geq 0$                                          | $\forall x \in R \rightarrow x^2 \geq 0 $ подстановка        |
| $c^2 - 2cd + d^2 \geq 0$                                     |                                                              |
| $\frac{c^2 + d^2}{2} = cd$                                   | $\forall x \in R \rightarrow x^2 \geq 0 $ подстановка $\sqrt{x}\sqrt{y} = \sqrt{xy}$ |

__Подстановка__:

Принято писать не так: $x_i \rightarrow t_i$, а вот так: $x_i | t_i$

Подстановка $\sigma$ это такой набор предметных переменных: $\sigma = {x_{i_1} | t_1, x_{i_2} | t_2 ... x_{i_n}}$, где $x_{j_k} \neq t_k$ 

$\tau = {x_{j_1} | s_1, x_{j_2}| s_2 ... x_{j_n} | s_m}$

$\sigma \circ \tau$

1. ${x_{i_1} | t_1^{\sigma} | x_{i_2}}$
2. вычеркиваем для $x_{j_k} = x_{i_l}$
3. вычеркиваем, если $r_k^{\sigma} = x_{j_k}$

$\sigma = {x_1 | x_2 , x_2 | f^2_1 x_1 x_3, x_3 | f_1^0}$

$\tau = {x_1 | f_1^1 , x_2, x_2 | x_1, x_3 | x_4, x_4 | x_3}$

# -----

## Метод резолюции

### Определение(Бинарная резольвента):

​	Пусть имеется 2 дизъюнкта

$P_1^n t_1 ... t_n \lor F, \neg P_1^n s_1...s_n \lor G$

$s_1, ...s_n$ - какие-то термы

$\sigma$ - унификатор $p_1^nt_1... t_n$ и $p_1^ns_1..s_n$

__Бинарной резольвентой__ называется дизъюнкт $F^{\sigma} \lor G^{\sigma}$.

> __Пример.__
>
> 1. $\neg P_1^2 f_1^0 f_1^1 x_1 \lor P_1^1x_1$
> 2. $P_1^2 x_2 x_3 \lor \neg P_2^1 x_3$
>
> $\sigma = {x_2 | f_1^0, x_3 | f_1^1 x_1}$
>
> $\neg P_1^2 f_1^0 f_1^1 x_1 \lor P_1^1 x_1$
>
> $P_1^2 f_1^0 f_1^1 x_1 \lor \neg P_2^1 f_1^1 x_1$

### Определение(Операция склейки)-----найти нормальное определение:

​	 __Операция склейка__

> Рассмотрим дизъюнкт:
>
> __Пример.__ $\neg P_1^2 x_1 x_2 \lor \neg P_1^2 x_2 x_1 \lor \neg P_1^2 f_1^0 f_1^0 \lor P_2^3 x_1 x_2 x_3$
>
> $\sigma = {x_1 | f_1^0, x_2 | f_1^0}$
>
> $\neg P_1^2 f_1^0 f_1^0 \lor P_2^3 f_1^0 f_1^0 x_3$

### Определение(Резольвента):

​	Пусть имется 2 дизъюнкта: $L_1 \lor F$ и $L_2 \lor G$. Резольвентой называется результат применения склейки на оба/любой/никакой дизъюнкт с последующим приминением правила резолюций.

### Определение:

​	Пусть имеется набор дизъюнктов $D_1, D_2, ..., D_n$, если построится такая цепочка $G_1, G_2, .. G_m = F$, что каждый элемент цепочки либо один из дизъюнктов, либо получен из предыдущих дизъюнктов по правилу резольвенты.

> Исходных дизъюнктов n.
>
> Пример.
>
> $D_1 = \neg P_1^1 x_1 \lor \neg P_2^1 x_1 \lor P_3^1 f_1^1 x_1$
>
> $D_2 = P_1^1 x_2 \lor P_3^1 f_1^1 x_3$
>
> $D_3 = P_1^1 f_1^0$
>
> $\sigma = {x_1 | f_1^0}$
>
> $\neg P_1^1 f_1^0 \lor \neg P_2^1 f_1^0 \lor P_3^1 $

### Определение(Пример дизъюнкта):

​	Когда некоторому дизъюнкту применяется подстановку, то результат называется __примером данного дизъюнкта__. $D^{\sigma}$ - пример дизъюнкта D. 

### Теорема(Лемма о подъеме ):

​	Пусть $D'_1$ - это пример дизъюнкта $D_1, D_2'$ - пример дизъюнкта $D_2$. $D'$ - резольвента $D_1'$ и $D'_2$, тогда существует резольвента $D$ для $D_1 $ и $D_2$, для которой $D'$ является примером.

#### Доказательство-----доделать:

Замятин, страница 107

Можем считать, что в $D_1$ и $D_2$ нет общих переменных символов. Тогда мы можем считать, что есть общая подстановка $\sigma = \sigma_1 \circ \sigma_2$.

