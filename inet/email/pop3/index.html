<!doctype html>
<html>
<head>
<meta charset='UTF-8'><meta name='viewport' content='width=device-width initial-scale=1'>
<title>POP3</title><link href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,700,400&subset=latin,latin-ext' rel='stylesheet' type='text/css' /><style type='text/css'>html {overflow-x: initial !important;}:root { --bg-color:#ffffff; --text-color:#333333; --select-text-bg-color:#B5D6FC; --select-text-font-color:auto; }
html { font-size: 14px; background-color: var(--bg-color); color: var(--text-color); font-family: "Helvetica Neue", Helvetica, Arial, sans-serif; -webkit-font-smoothing: antialiased; }
body { margin: 0px; padding: 0px; height: auto; bottom: 0px; top: 0px; left: 0px; right: 0px; font-size: 1rem; line-height: 1.42857; overflow-x: hidden; background: inherit; }
a.url { word-break: break-all; }
a:active, a:hover { outline: 0px; }
.in-text-selection, ::selection { text-shadow: none; background: var(--select-text-bg-color); color: var(--select-text-font-color); }
#write { margin: 0px auto; height: auto; width: inherit; word-break: normal; word-wrap: break-word; position: relative; padding-bottom: 70px; white-space: pre-wrap; overflow-x: visible; }
.first-line-indent #write p .md-line { text-indent: 0px; }
.first-line-indent #write li, .first-line-indent #write p, .first-line-indent #write p .md-line:first-child { text-indent: 2em; }
.for-image #write { padding-left: 8px; padding-right: 8px; }
body.typora-export { padding-left: 30px; padding-right: 30px; }
@media screen and (max-width: 500px) {
  body.typora-export { padding-left: 0px; padding-right: 0px; }
  .CodeMirror-sizer { margin-left: 0px !important; }
  .CodeMirror-gutters { display: none !important; }
}
#write > blockquote:first-child, #write > div:first-child, #write > figure:first-child, #write > ol:first-child, #write > p:first-child, #write > pre:first-child, #write > ul:first-child { margin-top: 30px; }
#write li > figure:first-child { margin-top: -20px; }
#write ol, #write ul { position: relative; }
img { max-width: 100%; vertical-align: middle; }
button, input, select, textarea { color: inherit; font-style: inherit; font-variant: inherit; font-weight: inherit; font-stretch: inherit; font-size: inherit; line-height: inherit; font-family: inherit; }
input[type="checkbox"], input[type="radio"] { line-height: normal; padding: 0px; }
*, ::after, ::before { box-sizing: border-box; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p, #write pre { width: inherit; }
#write h1, #write h2, #write h3, #write h4, #write h5, #write h6, #write p { position: relative; }
h1, h2, h3, h4, h5, h6 { break-after: avoid-page; break-inside: avoid; orphans: 2; }
p { orphans: 4; }
h1 { font-size: 2rem; }
h2 { font-size: 1.8rem; }
h3 { font-size: 1.6rem; }
h4 { font-size: 1.4rem; }
h5 { font-size: 1.2rem; }
h6 { font-size: 1rem; }
h1, h2, h3, h4, h5, h6 { margin-top: 1rem; margin-bottom: 1rem; }
p { -webkit-margin-before: 1rem; -webkit-margin-after: 1rem; -webkit-margin-start: 0px; -webkit-margin-end: 0px; }
.mathjax-block { margin-top: 0px; margin-bottom: 0px; -webkit-margin-before: 0px; -webkit-margin-after: 0px; }
.hidden { display: none; }
.md-blockmeta { color: rgb(204, 204, 204); font-weight: 700; font-style: italic; }
a { cursor: pointer; }
sup.md-footnote { padding: 2px 4px; background-color: rgba(238, 238, 238, 0.7); color: rgb(85, 85, 85); border-radius: 4px; cursor: pointer; }
sup.md-footnote a, sup.md-footnote a:hover { color: inherit; text-transform: inherit; text-decoration: inherit; }
#write input[type="checkbox"] { cursor: pointer; width: inherit; height: inherit; }
figure { overflow-x: auto; margin: 1.2em 0px; max-width: calc(100% + 16px); padding: 0px; }
figure > table { margin: 0px !important; }
tr { break-inside: avoid; break-after: auto; }
thead { display: table-header-group; }
table { border-collapse: collapse; border-spacing: 0px; width: 100%; overflow: auto; break-inside: auto; text-align: left; }
table.md-table td { min-width: 80px; }
.CodeMirror-gutters { border-right: 0px; background-color: inherit; }
.CodeMirror { text-align: left; }
.CodeMirror-placeholder { opacity: 0.3; }
.CodeMirror pre { padding: 0px 4px; }
.CodeMirror-lines { padding: 0px; }
div.hr:focus { cursor: none; }
pre { white-space: pre-wrap; }
pre.contain-cm { white-space: normal; }
.CodeMirror-gutters { margin-right: 4px; }
.md-fences { font-size: 0.9rem; display: block; break-inside: avoid; text-align: left; overflow: visible; white-space: pre; background: inherit; position: relative !important; }
.md-diagram-panel { width: 100%; margin-top: 10px; text-align: center; padding-top: 0px; padding-bottom: 8px; overflow-x: auto; }
.md-fences.mock-cm { white-space: pre-wrap; }
.show-fences-line-number .md-fences { padding-left: 0px; }
.show-fences-line-number .md-fences.mock-cm { padding-left: 40px; }
.CodeMirror-line { break-inside: avoid; }
.footnotes { opacity: 0.8; font-size: 0.9rem; margin-top: 1em; margin-bottom: 1em; }
.footnotes + .footnotes { margin-top: 0px; }
.md-reset { margin: 0px; padding: 0px; border: 0px; outline: 0px; vertical-align: top; background: 0px 0px; text-decoration: none; text-shadow: none; float: none; position: static; width: auto; height: auto; white-space: nowrap; cursor: inherit; -webkit-tap-highlight-color: transparent; line-height: normal; font-weight: 400; text-align: left; box-sizing: content-box; direction: ltr; }
li div { padding-top: 0px; }
blockquote { margin: 1rem 0px; }
li .mathjax-block, li p { margin: 0.5rem 0px; }
li { margin: 0px; position: relative; }
blockquote > :last-child { margin-bottom: 0px; }
blockquote > :first-child, li > :first-child { margin-top: 0px; }
.footnotes-area { color: rgb(136, 136, 136); margin-top: 0.714rem; padding-bottom: 0.143rem; white-space: normal; }
.footnote-line { white-space: pre-wrap; }
@media print {
  body, html { border: 1px solid transparent; height: 99%; break-after: avoid; break-before: avoid; }
  #write { margin-top: 0px; border-color: transparent !important; }
  .typora-export * { -webkit-print-color-adjust: exact; }
  html.blink-to-pdf { font-size: 13px; }
  .typora-export #write { padding-left: 1cm; padding-right: 1cm; padding-bottom: 0px; break-after: avoid; }
  .typora-export #write::after { height: 0px; }
  @page { margin: 20mm 0px; }
}
.footnote-line { margin-top: 0.714em; font-size: 0.7em; }
a img, img a { cursor: pointer; }
pre.md-meta-block { font-size: 0.8rem; min-height: 0.8rem; white-space: pre-wrap; background: rgb(204, 204, 204); display: block; overflow-x: hidden; }
p > img:only-child { display: block; margin: auto; }
.md-line > .md-image:only-child, p > .md-image:only-child { display: inline-block; width: 100%; text-align: center; }
#write .MathJax_Display { margin: 0.8em 0px 0px; }
.mathjax-block { white-space: pre; overflow: hidden; width: 100%; }
p + .mathjax-block { margin-top: -1.143rem; }
.mathjax-block:not(:empty)::after { display: none; }
[contenteditable="true"]:active, [contenteditable="true"]:focus { outline: 0px; box-shadow: none; }
.md-task-list-item { position: relative; list-style-type: none; }
.task-list-item.md-task-list-item { padding-left: 0px; }
.md-task-list-item > input { position: absolute; top: 0px; left: 0px; margin-left: -1.2em; margin-top: calc(1em - 10px); }
.math { font-size: 1rem; }
.md-toc { min-height: 3.58rem; position: relative; font-size: 0.9rem; border-radius: 10px; }
.md-toc-content { position: relative; margin-left: 0px; }
.md-toc-content::after, .md-toc::after { display: none; }
.md-toc-item { display: block; color: rgb(65, 131, 196); }
.md-toc-item a { text-decoration: none; }
.md-toc-inner:hover { }
.md-toc-inner { display: inline-block; cursor: pointer; }
.md-toc-h1 .md-toc-inner { margin-left: 0px; font-weight: 700; }
.md-toc-h2 .md-toc-inner { margin-left: 2em; }
.md-toc-h3 .md-toc-inner { margin-left: 4em; }
.md-toc-h4 .md-toc-inner { margin-left: 6em; }
.md-toc-h5 .md-toc-inner { margin-left: 8em; }
.md-toc-h6 .md-toc-inner { margin-left: 10em; }
@media screen and (max-width: 48em) {
  .md-toc-h3 .md-toc-inner { margin-left: 3.5em; }
  .md-toc-h4 .md-toc-inner { margin-left: 5em; }
  .md-toc-h5 .md-toc-inner { margin-left: 6.5em; }
  .md-toc-h6 .md-toc-inner { margin-left: 8em; }
}
a.md-toc-inner { font-size: inherit; font-style: inherit; font-weight: inherit; line-height: inherit; }
.footnote-line a:not(.reversefootnote) { color: inherit; }
.md-attr { display: none; }
.md-fn-count::after { content: "."; }
code, pre, tt { font-family: var(--monospace); }
.md-comment { color: rgb(162, 127, 3); opacity: 0.8; font-family: var(--monospace); }
code { text-align: left; }
a.md-print-anchor { border-width: initial !important; border-style: none !important; border-color: initial !important; display: inline-block !important; position: absolute !important; width: 1px !important; right: 0px !important; outline: 0px !important; background: 0px 0px !important; text-decoration: initial !important; text-shadow: initial !important; }
.md-inline-math .MathJax_SVG .noError { display: none !important; }
.mathjax-block .MathJax_SVG_Display { text-align: center; margin: 1em 0px; position: relative; text-indent: 0px; max-width: none; max-height: none; min-height: 0px; min-width: 100%; width: auto; display: block !important; }
.MathJax_SVG_Display, .md-inline-math .MathJax_SVG_Display { width: auto; margin: inherit; display: inline-block !important; }
.MathJax_SVG .MJX-monospace { font-family: monospace; }
.MathJax_SVG .MJX-sans-serif { font-family: sans-serif; }
.MathJax_SVG { display: inline; font-style: normal; font-weight: 400; line-height: normal; zoom: 90%; text-indent: 0px; text-align: left; text-transform: none; letter-spacing: normal; word-spacing: normal; word-wrap: normal; white-space: nowrap; float: none; direction: ltr; max-width: none; max-height: none; min-width: 0px; min-height: 0px; border: 0px; padding: 0px; margin: 0px; }
.MathJax_SVG * { transition: none; }
.os-windows.monocolor-emoji .md-emoji { font-family: "Segoe UI Symbol", sans-serif; }
.md-diagram-panel > svg { max-width: 100%; }
[lang="flow"] svg, [lang="mermaid"] svg { max-width: 100%; }
[lang="mermaid"] .node text { font-size: 1rem; }
table tr th { border-bottom: 0px; }


:root { --side-bar-bg-color: #fafafa; --control-text-color: #777; }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: normal; src: local("Open Sans Regular"), url("./github/400.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: normal; src: local("Open Sans Italic"), url("./github/400i.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: normal; font-weight: bold; src: local("Open Sans Bold"), url("./github/700.woff") format("woff"); }
@font-face { font-family: "Open Sans"; font-style: italic; font-weight: bold; src: local("Open Sans Bold Italic"), url("./github/700i.woff") format("woff"); }
html { font-size: 16px; }
body { font-family: "Open Sans", "Clear Sans", "Helvetica Neue", Helvetica, Arial, sans-serif; color: rgb(51, 51, 51); line-height: 1.6; }
#write { max-width: 860px; margin: 0px auto; padding: 20px 30px 100px; }
#write > ul:first-child, #write > ol:first-child { margin-top: 30px; }
body > :first-child { margin-top: 0px !important; }
body > :last-child { margin-bottom: 0px !important; }
a { color: rgb(65, 131, 196); }
h1, h2, h3, h4, h5, h6 { position: relative; margin-top: 1rem; margin-bottom: 1rem; font-weight: bold; line-height: 1.4; cursor: text; }
h1:hover a.anchor, h2:hover a.anchor, h3:hover a.anchor, h4:hover a.anchor, h5:hover a.anchor, h6:hover a.anchor { text-decoration: none; }
h1 tt, h1 code { font-size: inherit; }
h2 tt, h2 code { font-size: inherit; }
h3 tt, h3 code { font-size: inherit; }
h4 tt, h4 code { font-size: inherit; }
h5 tt, h5 code { font-size: inherit; }
h6 tt, h6 code { font-size: inherit; }
h1 { padding-bottom: 0.3em; font-size: 2.25em; line-height: 1.2; border-bottom: 1px solid rgb(238, 238, 238); }
h2 { padding-bottom: 0.3em; font-size: 1.75em; line-height: 1.225; border-bottom: 1px solid rgb(238, 238, 238); }
h3 { font-size: 1.5em; line-height: 1.43; }
h4 { font-size: 1.25em; }
h5 { font-size: 1em; }
h6 { font-size: 1em; color: rgb(119, 119, 119); }
p, blockquote, ul, ol, dl, table { margin: 0.8em 0px; }
li > ol, li > ul { margin: 0px; }
hr { height: 2px; padding: 0px; margin: 16px 0px; background-color: rgb(231, 231, 231); border: 0px none; overflow: hidden; box-sizing: content-box; }
body > h2:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child { margin-top: 0px; padding-top: 0px; }
body > h1:first-child + h2 { margin-top: 0px; padding-top: 0px; }
body > h3:first-child, body > h4:first-child, body > h5:first-child, body > h6:first-child { margin-top: 0px; padding-top: 0px; }
a:first-child h1, a:first-child h2, a:first-child h3, a:first-child h4, a:first-child h5, a:first-child h6 { margin-top: 0px; padding-top: 0px; }
h1 p, h2 p, h3 p, h4 p, h5 p, h6 p { margin-top: 0px; }
li p.first { display: inline-block; }
ul, ol { padding-left: 30px; }
ul:first-child, ol:first-child { margin-top: 0px; }
ul:last-child, ol:last-child { margin-bottom: 0px; }
blockquote { border-left: 4px solid rgb(223, 226, 229); padding: 0px 15px; color: rgb(119, 119, 119); }
blockquote blockquote { padding-right: 0px; }
table { padding: 0px; word-break: initial; }
table tr { border-top: 1px solid rgb(223, 226, 229); margin: 0px; padding: 0px; }
table tr:nth-child(2n), thead { background-color: rgb(248, 248, 248); }
table tr th { font-weight: bold; border-width: 1px 1px 0px; border-top-style: solid; border-right-style: solid; border-left-style: solid; border-top-color: rgb(223, 226, 229); border-right-color: rgb(223, 226, 229); border-left-color: rgb(223, 226, 229); border-image: initial; border-bottom-style: initial; border-bottom-color: initial; text-align: left; margin: 0px; padding: 6px 13px; }
table tr td { border: 1px solid rgb(223, 226, 229); text-align: left; margin: 0px; padding: 6px 13px; }
table tr th:first-child, table tr td:first-child { margin-top: 0px; }
table tr th:last-child, table tr td:last-child { margin-bottom: 0px; }
.CodeMirror-gutters { border-right: 1px solid rgb(221, 221, 221); }
.md-fences, code, tt { border: 1px solid rgb(223, 226, 229); background-color: rgb(248, 248, 248); border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 4px 0px; font-size: 0.9em; }
.md-fences { margin-bottom: 15px; margin-top: 15px; padding: 8px 1em 6px; }
.md-task-list-item > input { margin-left: -1.3em; }
@media screen and (min-width: 914px) {
}
@media print {
  html { font-size: 13px; }
  table, pre { break-inside: avoid; }
  pre { word-wrap: break-word; }
}
.md-fences { background-color: rgb(248, 248, 248); }
#write pre.md-meta-block { padding: 1rem; font-size: 85%; line-height: 1.45; background-color: rgb(247, 247, 247); border: 0px; border-radius: 3px; color: rgb(119, 119, 119); margin-top: 0px !important; }
.mathjax-block > .code-tooltip { bottom: 0.375rem; }
#write > h3.md-focus::before { left: -1.5625rem; top: 0.375rem; }
#write > h4.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h5.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
#write > h6.md-focus::before { left: -1.5625rem; top: 0.285714rem; }
.md-image > .md-meta { border-radius: 3px; font-family: Consolas, "Liberation Mono", Courier, monospace; padding: 2px 0px 0px 4px; font-size: 0.9em; color: inherit; }
.md-tag { color: inherit; }
.md-toc { margin-top: 20px; padding-bottom: 20px; }
.sidebar-tabs { border-bottom: none; }
#typora-quick-open { border: 1px solid rgb(221, 221, 221); background-color: rgb(248, 248, 248); }
#typora-quick-open-item { background-color: rgb(250, 250, 250); border-color: rgb(254, 254, 254) rgb(229, 229, 229) rgb(229, 229, 229) rgb(238, 238, 238); border-style: solid; border-width: 1px; }
#md-notification::before { top: 10px; }
.on-focus-mode blockquote { border-left-color: rgba(85, 85, 85, 0.12); }
header, .context-menu, .megamenu-content, footer { font-family: "Segoe UI", Arial, sans-serif; }
.file-node-content:hover .file-node-icon, .file-node-content:hover .file-node-open-state { visibility: visible; }
.mac-seamless-mode #typora-sidebar { background-color: var(--side-bar-bg-color); }
.md-lang { color: rgb(180, 101, 77); }
.html-for-mac .context-menu { --item-hover-bg-color: #E6F0FE; }





 .typora-export p, .typora-export .footnote-line {white-space: normal;} 
</style>
</head>
<body class='typora-export os-windows' >
<div  id='write'  class = 'is-node'><p><a href='../../../'>study</a> &gt; <a href='../../'>inet</a> &gt; <a href='../'>email</a> &gt; pop3</p><h1><a name='header-n160' class='md-header-anchor '></a>POP3</h1><p><strong>POP3</strong> <em>Post Office Protocol Version 3</em> - стандартный интернет-протокол прикладного уровня, используемый клиентами электронной почты для получения почты с удаленного сервера по TCP-соединению.</p><div class='md-toc' mdtype='toc'><p class="md-toc-content"><span class="md-toc-item md-toc-h1" data-ref="n160"><a class="md-toc-inner" href="#header-n160">POP3</a></span><span class="md-toc-item md-toc-h2" data-ref="n170"><a class="md-toc-inner" href="#header-n170">История</a></span><span class="md-toc-item md-toc-h2" data-ref="n179"><a class="md-toc-inner" href="#header-n179">Расширения</a></span><span class="md-toc-item md-toc-h3" data-ref="n184"><a class="md-toc-inner" href="#header-n184">STARTTLS</a></span><span class="md-toc-item md-toc-h3" data-ref="n187"><a class="md-toc-inner" href="#header-n187">SDPS</a></span><span class="md-toc-item md-toc-h2" data-ref="n192"><a class="md-toc-inner" href="#header-n192">Состояние сеанса</a></span><span class="md-toc-item md-toc-h2" data-ref="n211"><a class="md-toc-inner" href="#header-n211">Команды протокола</a></span><span class="md-toc-item md-toc-h3" data-ref="n273"><a class="md-toc-inner" href="#header-n273">APOP[править | править код]</a></span><span class="md-toc-item md-toc-h3" data-ref="n278"><a class="md-toc-inner" href="#header-n278">USER[править | править код]</a></span><span class="md-toc-item md-toc-h3" data-ref="n282"><a class="md-toc-inner" href="#header-n282">PASS[править | править код]</a></span><span class="md-toc-item md-toc-h3" data-ref="n286"><a class="md-toc-inner" href="#header-n286">DELE[править | править код]</a></span><span class="md-toc-item md-toc-h3" data-ref="n290"><a class="md-toc-inner" href="#header-n290">LIST[править | править код]</a></span><span class="md-toc-item md-toc-h3" data-ref="n294"><a class="md-toc-inner" href="#header-n294">NOOP[править | править код]</a></span><span class="md-toc-item md-toc-h3" data-ref="n297"><a class="md-toc-inner" href="#header-n297">RETR сообщение[править | править код]</a></span><span class="md-toc-item md-toc-h3" data-ref="n301"><a class="md-toc-inner" href="#header-n301">RSET[править | править код]</a></span><span class="md-toc-item md-toc-h3" data-ref="n304"><a class="md-toc-inner" href="#header-n304">STAT[править | править код]</a></span><span class="md-toc-item md-toc-h3" data-ref="n307"><a class="md-toc-inner" href="#header-n307">TOP[править | править код]</a></span></p></div><p>POP поддерживает простые требования «загрузи-и-удали» для доступа к удалённым почтовым ящикам. Использующие POP клиенты обычно соединяются, извлекают все письма, сохраняют их локально как новые сообщения, удаляют их с сервера, после чего разъединяются.</p><p>POP3-сервер прослушивает порт 110. Шифрование связи для POP3 запрашивается после запуска протокола, с помощью либо команды STLS (если она поддерживается), либо POP3S, которая соединяется с сервером используя протокол TLS или SSL по TCP-порту 995.</p><p>Доступные сообщения клиента фиксируются при открытии почтового ящика POP-сессией и определяются количеством сообщений для сессии, или, по желанию, с помощью уникального идентификатора, присваиваемого сообщению POP-сервером. Этот уникальный идентификатор является постоянным и уникальным для почтового ящика и позволяет клиенту получить доступ к одному и тому же сообщению в разных POP-сессиях. Почта извлекается и помечается для удаления с помощью номера сообщения. При выходе клиента из сессии помеченные сообщения удаляются из почтового ящика.</p><h2><a name='header-n170' class='md-header-anchor '></a>История</h2><p>POP (POP1) определён в <a href='https://tools.ietf.org/html/rfc918'>RFC 918</a> (1984), POP2 в <a href='https://tools.ietf.org/html/rfc937'>RFC 937</a> (1985). Первоначальная спецификация POP3 была представлена в <a href='https://tools.ietf.org/html/rfc1081'>RFC 1081</a> (1988). Нынешняя же описана в <a href='https://tools.ietf.org/html/rfc1939'>RFC 1939</a>, обновлена механизмом расширения (<a href='https://tools.ietf.org/html/rfc2449'>RFC 2449</a>) и механизмом аутентификации (<a href='https://tools.ietf.org/html/rfc1734'>RFC 1734</a>).</p><p>Версии POP2 был назначен порт 109.</p><p>Изначальная спецификация POP3 поддерживала только незашифрованный механизм входа в систему USER/<a href='https://ru.wikipedia.org/wiki/%D0%9F%D0%B0%D1%80%D0%BE%D0%BB%D1%8C'>PASS</a> или управление доступом <a href='https://ru.wikipedia.org/wiki/Rlogin'>.rhosts</a>. На данный момент, POP3 поддерживает различные методы <a href='https://ru.wikipedia.org/wiki/%D0%90%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F'>аутентификации</a> для предоставления разных уровней защиты от незаконного доступа к пользовательской почте. Большинство из них предоставлены механизмами расширения POP3. Клиенты POP3 поддерживают методы <a href='https://ru.wikipedia.org/wiki/Simple_Authentication_and_Security_Layer'>SASL</a> через расширение AUTH. В рамках проекта <a href='https://ru.wikipedia.org/wiki/%D0%9C%D0%B0%D1%81%D1%81%D0%B0%D1%87%D1%83%D1%81%D0%B5%D1%82%D1%81%D0%BA%D0%B8%D0%B9_%D1%82%D0%B5%D1%85%D0%BD%D0%BE%D0%BB%D0%BE%D0%B3%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B8%D0%B9_%D0%B8%D0%BD%D1%81%D1%82%D0%B8%D1%82%D1%83%D1%82'>Массачусетского технологического института</a> «Афина» также был введён метод на основе <a href='https://ru.wikipedia.org/wiki/Kerberos'>Кербероса</a>. <a href='https://tools.ietf.org/html/rfc1460'>RFC 1460</a> ввёл APOP в основной протокол. APOP — протокол вида <a href='https://ru.wikipedia.org/wiki/%D0%92%D1%8B%D0%B7%D0%BE%D0%B2-%D0%BE%D1%82%D0%B2%D0%B5%D1%82_(%D0%B0%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F)'>«запрос/ответ»</a>, использующий <a href='https://ru.wikipedia.org/wiki/%D0%9A%D1%80%D0%B8%D0%BF%D1%82%D0%BE%D0%B3%D1%80%D0%B0%D1%84%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%B0%D1%8F_%D1%85%D0%B5%D1%88-%D1%84%D1%83%D0%BD%D0%BA%D1%86%D0%B8%D1%8F'>функцию хэширования</a> <a href='https://ru.wikipedia.org/wiki/MD5'>MD5</a>. Среди клиентов, реализующих APOP, можно выделить <a href='https://ru.wikipedia.org/wiki/Mozilla_Thunderbird'>Mozilla Thunderbird</a>, <a href='https://ru.wikipedia.org/wiki/Opera_Mail'>Opera Mail</a>, <a href='https://ru.wikipedia.org/wiki/Eudora_Mail'>Eudora</a>, Windows Live Mail, PowerMail, <a href='https://ru.wikipedia.org/wiki/Apple_Mail'>Apple Mail</a>, и т. д.</p><p>Было высказано неофициальное предложение для спецификации «POP4», с рабочей реализацией сервера. Это предложение добавило основные функции управления папками, поддержку составных сообщений, а также управление флагами сообщений. Однако, никакого прогресса «POP4» не наблюдается с 2003 г.</p><h2><a name='header-n179' class='md-header-anchor '></a>Расширения</h2><p>Механизм расширений был предложен в <a href='https://tools.ietf.org/html/rfc2449'>RFC 2449</a> для размещения новых расширений, а также организованного объявления о поддержке опциональных команд, таких как TOP и UIDL. RFC не намеревались поощрять расширения и подтвердили, что роль POP3 заключается в предоставлении простой поддержки в основном для требования «загрузи-и-удали».</p><p>Расширения выводятся списком командой CAPA. За исключением APOP, все опциональные команды были включены в изначальный набор возможностей. Как и в стандарте ESMTP (<a href='https://tools.ietf.org/html/rfc5321'>RFC 5321</a>), возможности, начинающиеся с &quot;X&quot;, являются локальными.</p><h3><a name='header-n184' class='md-header-anchor '></a>STARTTLS</h3><p>Расширение <a href='https://ru.wikipedia.org/wiki/STARTTLS'>STARTTLS</a> позволяет использовать <a href='https://ru.wikipedia.org/wiki/TLS'>TLS</a> (Transport Layer Security) или <a href='https://ru.wikipedia.org/wiki/SSL'>SSL</a> (Secure Sockets Layer) для связи с помощью команды STLS, по стандартному POP3-порту. Некоторые клиенты и сервера используют метод альтернативного порта, работающий с TCP-портом 995 (POP3S).</p><h3><a name='header-n187' class='md-header-anchor '></a>SDPS</h3><p>Британский провайдер Demon Internet ввёл расширение POP3, позволяющее иметь несколько учётных записей для каждого домена и ставшее известным как SDPS (Standard Dial-up POP3 Service). Для доступа к каждой учётной записи имя пользователя включает в себя имя хоста, например, john@hostname или john+hostname.</p><p>Google Apps используют тот же метод[<a href='https://ru.wikipedia.org/wiki/POP3#cite_note-1'>1]</a>.</p><h2><a name='header-n192' class='md-header-anchor '></a>Состояние сеанса</h2><p>В протоколе POP3 предусмотрено 3 состояния сеанса:</p><ul><li><p><a href='https://ru.wikipedia.org/wiki/%D0%90%D0%B2%D1%82%D0%BE%D1%80%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F'>Авторизация</a></p><p>Клиент проходит процедуру <a href='https://ru.wikipedia.org/wiki/%D0%90%D1%83%D1%82%D0%B5%D0%BD%D1%82%D0%B8%D1%84%D0%B8%D0%BA%D0%B0%D1%86%D0%B8%D1%8F'>Аутентификации</a>.</p></li><li><p><a href='https://ru.wikipedia.org/wiki/%D0%A2%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D1%8F_(%D0%B8%D0%BD%D1%84%D0%BE%D1%80%D0%BC%D0%B0%D1%82%D0%B8%D0%BA%D0%B0)'>Транзакция</a></p><p>Клиент получает информацию о состоянии почтового ящика, принимает и удаляет почту.</p></li><li><p>Обновление</p><p>Сервер удаляет выбранные письма и закрывает соединение.</p></li></ul><h2><a name='header-n211' class='md-header-anchor '></a>Команды протокола</h2><figure><table><thead><tr><th>Имя</th><th>Аргументы</th><th>Ограничения</th><th>Возможные ответы</th></tr></thead><tbody><tr><td>APOP</td><td>[имя][digest]</td><td>Её поддержка не является обязательной</td><td>* +OK maildrop has n message* -ERR password supplied for [имя] is incorrect</td></tr><tr><td>USER</td><td>[имя]</td><td>—</td><td>* +OK name is a valid mailbox* -ERR never heard of mailbox name</td></tr><tr><td>PASS</td><td>[пароль]</td><td>Работает после успешной передачи имени почтового ящика</td><td>* +OK maildrop locked and ready* -ERR invalid password* -ERR unable to lock maildrop</td></tr><tr><td>DELE</td><td>[сообщение]</td><td>Доступна после успешной аутентификации</td><td>* +OK message deleted* -ERR no such message</td></tr><tr><td>LIST</td><td>[сообщение]</td><td>Доступна после успешной аутентификации</td><td>* +OK scan listing follows* -ERR no such message</td></tr><tr><td>NOOP</td><td>—</td><td>Доступна после успешной аутентификации</td><td>+OK</td></tr><tr><td>RETR</td><td>[сообщение]</td><td>Доступна после успешной аутентификации</td><td>* +OK message follows* -ERR no such message</td></tr><tr><td>RSET</td><td>—</td><td>Доступна после успешной аутентификации</td><td>+OK</td></tr><tr><td>STAT</td><td>—</td><td>Доступна после успешной аутентификации</td><td>+OK a b</td></tr><tr><td>TOP</td><td>[сообщение][количество строк]</td><td>Доступна после успешной аутентификации</td><td>* +OK n octets* -ERR no such message</td></tr><tr><td>QUIT</td><td>—</td><td>—</td><td>+OK</td></tr></tbody></table></figure><h3><a name='header-n273' class='md-header-anchor '></a>APOP[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=9'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=9'>править код</a>]</h3><p>Команда служит для передачи серверу имени пользователя и зашифрованного пароля (digest).
<strong>[имя]</strong> — строка, указывающая имя почтового ящика.
<strong>[digest]</strong> — <a href='https://ru.wikipedia.org/wiki/%D0%A5%D0%B5%D1%88-%D1%81%D1%83%D0%BC%D0%BC%D0%B0'>хеш-сумма</a> временной метки, конкатенированной с паролем пользователя, вычисленная по алгоритму <a href='https://ru.wikipedia.org/wiki/MD5'>MD5</a>. В случае поддержки этой команды временная метка получается при соединении с сервером.</p><h3><a name='header-n278' class='md-header-anchor '></a>USER[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=10'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=10'>править код</a>]</h3><p>Передаёт серверу имя пользователя.
<strong>[имя]</strong> — строка, указывающая имя почтового ящика.</p><h3><a name='header-n282' class='md-header-anchor '></a>PASS[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=11'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=11'>править код</a>]</h3><p>Передаёт серверу пароль почтового ящика.
<strong>[пароль]</strong> — пароль для почтового ящика.</p><h3><a name='header-n286' class='md-header-anchor '></a>DELE[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=12'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=12'>править код</a>]</h3><p>Сервер помечает указанное сообщение для удаления. Сообщения, помеченные на удаление, реально удаляются только после закрытия транзакции (закрытие транзакций происходит обычно после посыла команды QUIT, кроме этого, например, на серверах закрытие транзакций может происходить по истечении определённого времени, установленного сервером).
<strong>[сообщение]</strong> — номер сообщения.</p><h3><a name='header-n290' class='md-header-anchor '></a>LIST[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=13'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=13'>править код</a>]</h3><p>Если был передан аргумент, то сервер выдаёт информацию об указанном сообщении. Если аргумент не был передан, то сервер выдаёт информацию обо всех сообщениях, находящихся в почтовом ящике. Сообщения, помеченные для удаления, не перечисляются.
<strong>[сообщение]</strong> — номер сообщения (необязательный аргумент).</p><h3><a name='header-n294' class='md-header-anchor '></a>NOOP[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=14'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=14'>править код</a>]</h3><p>Сервер ничего не делает, всегда отвечает положительно.</p><h3><a name='header-n297' class='md-header-anchor '></a>RETR сообщение[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=15'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=15'>править код</a>]</h3><p>Сервер передаёт сообщение с указанным номером.
<strong>[сообщение]</strong> — номер сообщения.</p><h3><a name='header-n301' class='md-header-anchor '></a>RSET[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=16'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=16'>править код</a>]</h3><p>Этой командой производится откат транзакций внутри сессии. Например, если пользователь случайно пометил на удаление какие-либо сообщения, он может убрать эти пометки, отправив эту команду.</p><h3><a name='header-n304' class='md-header-anchor '></a>STAT[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=17'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=17'>править код</a>]</h3><p>Сервер возвращает количество сообщений в почтовом ящике и размер почтового ящика в октетах. Сообщения, помеченные как удалённые, при этом не учитываются.</p><h3><a name='header-n307' class='md-header-anchor '></a>TOP[<a href='https://ru.wikipedia.org/w/index.php?title=POP3&veaction=edit&section=18'>править</a> | <a href='https://ru.wikipedia.org/w/index.php?title=POP3&action=edit&section=18'>править код</a>]</h3><p>Сервер возвращает заголовки указанного сообщения, пустую строку и указанное количество первых строк тела сообщения.
<strong>[сообщение]</strong> — номер сообщения.
<strong>[количество строк]</strong> — сколько строк нужно вывести.</p><p>&nbsp;</p></div>
</body>
</html>