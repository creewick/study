[study](../) > [inet](./) > routing

# Маршрутизация

Routing - процесс определения маршрута следования информации в сетях связи.

[TOC]

# Способы адресации

## Classful Network

Адресное пространство протокола IPv4 делится на пять классов адресов: А, B, C, D, E.

Принадлежность адреса к классу задаётся первыми битами адреса. Каждый класс определяет либо соответствующий размер сети (классы A, B, C), либо сеть многоадресной передачи (класс D). Диапазон адресов класса E был зарезервирован для будущих или экспериментальных целей.

Использование адрессации на базе классов сейчас прекращено.

**Класс A:** `0aaaaaaa bbbbbbbb bbbbbbbb bbbbbbbb`

- Адрес сети: 7 бит
- Адрес хоста: 24 бита

**Класс B:** `10aaaaaa aaaaaaaa bbbbbbbb bbbbbbbb`

- Адрес сети: 14 бит
- Адрес хоста: 16 бит

**Класс C:** `110aaaaa aaaaaaaa aaaaaaaa bbbbbbbb`

- Адрес сети: 21 бит
- Адрес хоста: 8 бит

**Класс D:** `1110сссс сссссссс сссссссс сссссссс`

- Адрес многоадресной рассылки: 28 бит

**Класс E:** `1111dddd dddddddd dddddddd dddddddd`

## Classless Inter-Domain Routing

Каждому поставщику услуг Интернета назначается непрерывный диапазон IP-адресов.

Все адреса каждого поставщика услуг имеют общую старшую часть - префикс, поэтому маршрутизация на магистралях Интернета может осуществляться на основе префиксов, а не полных адресов сетей.

Достаточно поместить одну запись сразу для всех сетей, имеющих общий префикс.

**IP:**		 `172.16.0.1`

`10101100 00010000 00000000 00000001`

**Маска:**	 `255.240.0.0`

`11111111 11110000 00000000 00000000`

*Сокращенно:* `172.16.0.1/12`

# Протоколы маршрутизации

- Не требующие таблиц маршрутизации

  *Лавинная, от источника*

- Требующие таблиц маршрутизации

  - Статические

    *Админ сам заполняет таблицы*

  - Адаптивные

    - Дистанционно-векторные
    - Состояния связей

## RIP

Routing Information Protocol - протокол динамической маршрутизации, относящийся к дистанционно-векторным протоколам. 

Очень простой. Применяется в небольших сетях. В качестве метрики использует число переходов.

Максимальное число хопов: 15

Работает на сетевом уровне, 520/UDP

### Формат пакета RIP v1

`Команда` `Версия ` `0000000000000000`

`-Тип-адреса(2)-` ` 0000000000000000`

`-------Адрес-IPv4(4-байта)------`

`00000000000000000000000000000000`

`00000000000000000000000000000000`

`--------Метрика(4-байта)--------`

Команды:

1. request
2. response

## OSPF

Open Shortest Path First - протокол динамической маршрутизации, основанный на технологии отслеживании состояния канала.

